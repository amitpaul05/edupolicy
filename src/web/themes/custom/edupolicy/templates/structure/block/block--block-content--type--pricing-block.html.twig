{#
/**
 * @file
 * Theme override to display a block.
 *
 * Available variables:
 * - plugin_id: The ID of the block implementation.
 * - label: The configured label of the block if visible.
 * - configuration: A list of the block's configuration values.
 *   - label: The configured label for the block.
 *   - label_display: The display settings for the label.
 *   - provider: The module or other provider that provided this block plugin.
 *   - Block plugin specific settings will also be stored here.
 * - in_preview: Whether the plugin is being rendered in preview mode.
 * - content: The content of this block.
 * - attributes: array of HTML attributes populated by modules, intended to
 *   be added to the main container tag of this template.
 *   - id: A valid HTML ID and guaranteed unique.
 * - title_attributes: Same as attributes, except applied to the main title
 *   tag that appears in the template.
 * - title_prefix: Additional output populated by modules, intended to be
 *   displayed in front of the main title tag that appears in the template.
 * - title_suffix: Additional output populated by modules, intended to be
 *   displayed after the main title tag that appears in the template.
 *
 * @see template_preprocess_block()
 */
#}
{%
  set classes = [
    'block',
    'block-' ~ configuration.provider|clean_class,
    'block-' ~ plugin_id|clean_class,
  ]
%}

<div{{ attributes.addClass(classes) }}>
  {{ title_prefix }}
  {% if label %}
    <h2{{ title_attributes }}>{{ label }}</h2>
  {% endif %}
  {{ title_suffix }}
  {% block content %}
    {# {{ content }} #}
    {% if content.field_popularity_type['#items'].value %}
      <div class="popularity-badge">
        {{ content.field_popularity_type }}
      </div>
    {% endif %}


    {# Icon/Image #}
    {% if content.field_image %}
      <div class="pricing-icon">
        {{ content.field_image }}
      </div>
    {% endif %}

      {# Title & Subtitle #}
      <h3 class="pricing-title">
        {{ content.field_title }}
      </h3>
    {% if content.field_subtitle %}
      <div class="pricing-subtitle">{{ content.field_subtitle }}</div>
    {% endif %}

      {# Price & Duration #}
      <div class="pricing-info">
        {% if content.field_price %}
          {# {% set is_numeric = content.field_price['#items'].value matches '/^[0-9,]+$/' %} #}
          {% set is_numeric = content.field_price['#items'].value matches '/^\\$?[0-9,]+$/' %}
          <span class="price {% if is_numeric %}numeric{% endif %}">
            <i class="fa-solid fa-dollar-sign"></i>
            {{ content.field_price }}
            {% if is_numeric %}
              <span class="starting-text">starting</span>
            {% endif %}
          </span>
        {% endif %}

        {% if content.field_date %}
          <span class="duration">{{ content.field_date }}</span>
        {% endif %}
      </div>


      {# Body list (features) #}
      <div class="pricing-features">
        {{ content.body }}
      </div>

    {# Call-to-action link #}
    {% if content.field_link %}
      <div class="pricing-button">
        {{ content.field_link }}
      </div>
    {% endif %}
  {% endblock %}
</div>
